-keep class com.bity.icp_kotlin_kit.data.** { *; }
-keepclassmembers class com.bity.icp_kotlin_kit.data**$* { *; }
-keepclassmembernames class com.bity.icp_kotlin_kit.data**$* { *; }

# Retrofit
-keep class retrofit2.** { *; }

# Keep Kotlin metadata (usedb by reflection)
-keepattributes *Annotation*
-keepattributes Signature
-keepattributes InnerClasses
-keepattributes KotlinMetadata

 # With R8 full mode generic signatures are stripped for classes that are not
 # kept. Suspend functions are wrapped in continuations where the type argument
 # is used.
 -keep,allowobfuscation,allowshrinking class kotlin.coroutines.Continuation

# Keep the classes, constructors, and methods in the com.bity.icp_kotlin_kit.domain.generated_file package
# because reflection is used on them from the candid package.
-keep class com.bity.icp_kotlin_kit.domain.generated_file.** {
    public <init>(...);  # Keep constructors as reflection calls them.
    public *;            # Keep all public methods and fields as reflection might use them.
}

# You can still obfuscate the candid package because reflection is only happening inside it
# (but not on itself), so you don't need to protect that package.

# Prevent any code shrinking or optimizations for both packages.
-keepnames class com.bity.icp_kotlin_kit.candid.**
-keepnames class com.bity.icp_kotlin_kit.domain.generated_file.**
-dontoptimize
# Keep all fields in the candid package (if reflection accesses fields directly).
-keepclassmembers class com.bity.icp_kotlin_kit.domain.generated_file.** {
    <fields>;
}
# Keep public methods in the candid package.
-keepclassmembers class com.bity.icp_kotlin_kit.candid.** {
    public *;
}

# Keep all classes in com.bity.icp_kotlin_kit.domain.generated_file because they are used via reflection.
-keep class com.bity.icp_kotlin_kit.domain.generated_file.** {
    public <init>(...);  # Keep constructors.
    public *;            # Keep all public methods and fields.
}

# Ensure constructor parameters are not obfuscated, keeping them in their original form
# (especially important for Kotlin default parameters).
-keepclassmembers class com.bity.icp_kotlin_kit.domain.generated_file.** {
    public <init>(...);  # Keep constructors, especially with multiple parameters.
    public *;            # Keep public methods/fields to avoid any obfuscation issues.
}

# Keep Kotlin metadata and annotations (important for Kotlin reflection and synthetic parameters).
-keepattributes *Annotation*
-keepattributes KotlinMetadata

# Keep synthetic classes and members (especially for Kotlin classes with default parameters).
-keepclasseswithmembers class kotlin.** {
    synthetic <methods>;
}

# Preserve default argument constructors generated by Kotlin.
-keepclassmembers class ** {
    @kotlin.jvm.JvmOverloads <init>(...);
}

# Prevent obfuscation of Kotlin synthetic default methods.
-keep class kotlin.jvm.internal.** { *; }